(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(20),o=n.n(c),s=n(1),i=n.n(s),u=n(4),l=n(5),d=n(6),b=n.n(d),p="/api/books",f=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(p);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(p,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(p,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(p,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x={getAll:f,create:j,update:h,remove:v},O=n(0),m=function(e){var t=e.books,n=e.handleSelectionChange,r=e.selectedBook,a=t.sort((function(e,t){return e.author.localeCompare(t.author)}));return Object(O.jsx)("ul",{type:"none",className:"bookList",children:a.map((function(e){return Object(O.jsxs)("li",{className:(null===r||void 0===r?void 0:r.id)===e.id?"selectedBook":"book",onClick:function(){return n(e)},children:[e.author," - ",Object(O.jsx)("strong",{children:e.title})]},e.id)}))})},k=n(9),g=n(11),w=function(e){var t=e.selectedBook,n=e.handleSelectionChange,a=e.fetchBooks,c=e.setNotification,o={title:"",author:"",description:""},s=Object(r.useState)(o),d=Object(l.a)(s,2),b=d[0],p=d[1],f=!!t.title;Object(r.useEffect)((function(){p(t)}),[t]);var j=function(){return!(!b.title||!b.author)},h=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.create(b);case 3:return t=e.sent,e.next=6,a();case 6:p(o),c({info:"Book succesfully added: ".concat(t.title)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c({error:"".concat(e.t0,": Make sure that the title doesn't already exist")});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.update(b,t.id);case 3:r=e.sent,p(o),n(o),c({info:"Book successfully modified: ".concat(r.title)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c({error:"".concat(e.t0.message,": This item might have been deleted")});case 12:return e.prev=12,e.next=15,a();case 15:return e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,9,12,16]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.title,e.next=4,x.remove(t.id);case 4:p(o),n(o),c({info:"Book successfully deleted: ".concat(r)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c({error:"".concat(e.t0.message,": This item might have already been deleted")});case 12:return e.prev=12,e.next=15,a();case 15:return e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,9,12,16]])})));return function(){return e.apply(this,arguments)}}(),w=function(e){p(Object(g.a)(Object(g.a)({},b),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(O.jsxs)("div",{className:"bookForm",children:[Object(O.jsxs)("label",{children:["Title *",Object(O.jsx)("br",{}),Object(O.jsx)("input",{type:"text",value:b.title,name:"title",id:"titleInput",onChange:w,maxLength:"50"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{children:["Author *",Object(O.jsx)("br",{}),Object(O.jsx)("input",{type:"text",value:b.author,name:"author",id:"authorInput",onChange:w,maxLength:"50"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{children:["Description",Object(O.jsx)("br",{}),Object(O.jsx)("textarea",{type:"text",rows:"10",columns:"10",value:b.description,name:"description",id:"descriptionInput",maxLength:"150",onChange:w})]}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{disabled:f||!j(),onClick:h,id:"saveNewButton",children:"Save New"}),Object(O.jsx)("button",{disabled:!f||!j(),onClick:v,id:"saveEditedButton",children:"Save"}),Object(O.jsx)("button",{disabled:!f,onClick:m,id:"deleteButton",children:"Delete"}),Object(O.jsx)("button",{disabled:!f,onClick:function(){n(o)},id:"cancelButton",children:"Cancel"})]})},y=function(e){var t=e.message,n=e.className;return t?Object(O.jsx)("div",{className:n,children:t}):null},B=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({title:"",author:"",description:""}),o=Object(l.a)(c,2),s=o[0],d=o[1],b=Object(r.useState)(null),p=Object(l.a)(b,2),f=p[0],j=p[1];Object(r.useEffect)((function(){h()}),[]);var h=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getAll();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j({error:"Failed to fetch data from the server"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(e){d(e)};return Object(O.jsxs)("div",{className:"mainContainer",children:[Object(O.jsx)(y,{message:(null===f||void 0===f?void 0:f.info)||(null===f||void 0===f?void 0:f.error),className:"\n                    ".concat((null===f||void 0===f?void 0:f.error)?"error":"info","\n                    notification\n                ")}),Object(O.jsx)("br",{}),Object(O.jsx)(w,{selectedBook:s,handleSelectionChange:v,fetchBooks:h,setNotification:j}),Object(O.jsx)(m,{books:n,selectedBook:s,handleSelectionChange:v})]})};n(45);o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(B,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.947ffb8a.chunk.js.map