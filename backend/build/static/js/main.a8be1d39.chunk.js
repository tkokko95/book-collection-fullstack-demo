(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(20),o=n.n(c),s=n(1),i=n.n(s),u=n(4),l=n(5),d=n(6),b=n.n(d),f="/api/books",p=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(f);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(f,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(f,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(f,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x={getAll:p,create:h,update:j,remove:v},O=n(0),m=function(e){var t=e.books,n=e.handleSelectionChange,r=e.selectedBook,a=t.sort((function(e,t){return e.author.localeCompare(t.author)}));return Object(O.jsx)("ul",{type:"none",className:"bookList",children:a.map((function(e){return Object(O.jsxs)("li",{className:(null===r||void 0===r?void 0:r.id)===e.id?"selectedBook":"book",onClick:function(){return n(e)},children:[e.author," - ",Object(O.jsx)("strong",{children:e.title})]},e.id)}))})},k=n(9),g=n(11),w=function(e){var t=e.selectedBook,n=e.handleSelectionChange,a=e.fetchBooks,c=e.showNotification,o={title:"",author:"",description:""},s=Object(r.useState)(o),d=Object(l.a)(s,2),b=d[0],f=d[1],p=!!t.title,h=function(){return!(!b.title||!b.author)};Object(r.useEffect)((function(){f(t)}),[t]);var j=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.create(b);case 3:return e.next=5,a();case 5:f(o),c({info:"Book succesfully added"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c({error:"".concat(e.t0,": Make sure that the title doesn't already exist")});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.update(b,t.id);case 3:f(o),n(o),c({info:"Book successfully modified"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({error:"".concat(e.t0.message,": This item might have been deleted")});case 11:return e.prev=11,e.next=14,a();case 14:return e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.remove(t.id);case 3:f(o),n(o),c({info:"Book successfully deleted"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({error:"".concat(e.t0.message,": This item might have already been deleted")});case 11:return e.prev=11,e.next=14,a();case 14:return e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])})));return function(){return e.apply(this,arguments)}}(),w=function(e){f(Object(g.a)(Object(g.a)({},b),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(O.jsxs)("div",{className:"bookForm",children:[Object(O.jsxs)("label",{children:["Title *",Object(O.jsx)("br",{}),Object(O.jsx)("input",{type:"text",value:b.title,name:"title",id:"titleInput",onChange:w,maxLength:"50"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{children:["Author *",Object(O.jsx)("br",{}),Object(O.jsx)("input",{type:"text",value:b.author,name:"author",id:"authorInput",onChange:w,maxLength:"50"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{children:["Description",Object(O.jsx)("br",{}),Object(O.jsx)("textarea",{type:"text",rows:"10",columns:"10",value:b.description,name:"description",id:"descriptionInput",maxLength:"150",onChange:w})]}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{disabled:p||!h(),onClick:j,id:"saveNewButton",children:"Save New"}),Object(O.jsx)("button",{disabled:!p||!h(),onClick:v,id:"saveEditedButton",children:"Save"}),Object(O.jsx)("button",{disabled:!p,onClick:m,id:"deleteButton",children:"Delete"}),Object(O.jsx)("button",{disabled:!p,onClick:function(){n(o)},id:"cancelButton",children:"Cancel"})]})},y=function(e){var t=e.message,n=e.className;return t?Object(O.jsx)("div",{className:n,children:t}):null},B=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({title:"",author:"",description:""}),o=Object(l.a)(c,2),s=o[0],d=o[1],b=Object(r.useState)(null),f=Object(l.a)(b,2),p=f[0],h=f[1],j=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getAll();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v({error:"Failed to fetch data from the server"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(e){h(e),setTimeout((function(){h(null)}),5e3)};Object(r.useEffect)((function(){j()}),[]);var k=function(e){d(e)};return Object(O.jsxs)("div",{className:"mainContainer",children:[Object(O.jsx)(y,{message:(null===p||void 0===p?void 0:p.info)||(null===p||void 0===p?void 0:p.error),className:"\n                    ".concat((null===p||void 0===p?void 0:p.error)?"error":"info","\n                    notification\n                ")}),Object(O.jsx)("br",{}),Object(O.jsx)(w,{selectedBook:s,handleSelectionChange:k,fetchBooks:j,showNotification:v}),Object(O.jsx)(m,{books:n,selectedBook:s,handleSelectionChange:k})]})};n(45);o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(B,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.a8be1d39.chunk.js.map